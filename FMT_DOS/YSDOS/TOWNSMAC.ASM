; FM TOWNS Specific Macros



TSUGARUIO_VM_HOST_IF_CMD_STATUS		EQU		02386h
TSUGARUIO_VM_HOST_IF_DATA			EQU		02387h

TOWNS_VMIF_CMD_PAUSE				EQU		02h
TOWNS_VMIF_CMD_NOTIFY_DOSSEG		EQU		07h

YSDOS_BREAK_CS_02B1H_IS_NONZERO		EQU		0
YSDOS_REENTER_COUNT_IS_NEGATIVE		EQU		1
YSDOS_DISKWRITE_NOT_IMPLEMENTED_YET	EQU		2
YSDOS_FREAD_FROM_CHARDEV_NOT_IMPLEMENTED_YET	EQU		3

TSUGARU_DEBUG_BREAK		MACRO		YSDOS_BREAK_CODE					;--NOT_IN_NASM--
						PUSH		DX									;--NOT_IN_NASM--
						PUSH		AX									;--NOT_IN_NASM--
						MOV			DX,TSUGARUIO_VM_HOST_IF_CMD_STATUS	;--NOT_IN_NASM--
						MOV			AL,TOWNS_VMIF_CMD_PAUSE				;--NOT_IN_NASM--
						MOV			AH,YSDOS_BREAK_CODE					;--NOT_IN_NASM--
						OUT			DX,AL								;--NOT_IN_NASM--
						POP			AX									;--NOT_IN_NASM--
						POP			DX									;--NOT_IN_NASM--
						ENDM											;--NOT_IN_NASM--

;%MACRO					TSUGARU_DEBUG_BREAK	1							;--USE_IN_NASM--
;						PUSH		DX									;--USE_IN_NASM--
;						PUSH		AX									;--USE_IN_NASM--
;						MOV			DX,TSUGARUIO_VM_HOST_IF_CMD_STATUS	;--USE_IN_NASM--
;						MOV			AL,TOWNS_VMIF_CMD_PAUSE				;--USE_IN_NASM--
;						MOV			AH,%1								;--USE_IN_NASM--
;						OUT			DX,AL								;--USE_IN_NASM--
;						POP			AX									;--USE_IN_NASM--
;						POP			DX									;--USE_IN_NASM--
;						%ENDMACRO										;--USE_IN_NASM--

